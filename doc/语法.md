## MQL语法

### SELECT

```sql
SELECT field1, field2 AS f2 FROM table;
SELECT DISTINCT title,city FROM person;
SELECT DISTINCT title AS 'tt',city FROM person;
SELECT DISTINCT salary * 10 AS 'sa' FROM person
SELECT COUNT(*) as total FROM person;
```

### ORDER BY

```sql
SELECT name, age FROM test ORDER BY age DESC;
```

### LIMIT

```sql
SELECT name, age FROM test ORDER BY age DESC LIMIT 1;
```

### WHERE

```sql
SELECT name, age FROM test ORDER BY age DESC LIMIT 1;
//NULL判断
SELECT * FROM person WHERE secondName IS NOT NULL;
//TRUE/FALSE
SELECT * FROM person WHERE advance IS TRUE;
SELECT * FROM person WHERE advance IS FALSE;
```

### GROUP BY

支持的聚合函数,参考：[文档](https://docs.mongodb.com/manual/reference/operator/aggregation/group/)

支持sum、avg、max、min、first、last、StdDevPop、StdDevSamp

```sql
SELECT title, SUM(salary) AS total from person WHERE salary > 0 GROUP BY title ORDER BY total;
SELECT title, MAX(salary) AS 'max', MIN(salary) as 'min' ,AVG(salary) as 'avg' from person WHERE salary > 0 GROUP BY title ORDER BY 'max';
SELECT first(firstName) AS name, first(bornDate) as born FROM person GROUP BY title ORDER BY bornDate ASC;
SELECT last(firstName) AS name, last(bornDate) as born FROM person GROUP BY title ORDER BY bornDate ASC;
SELECT sum(1) AS 'count', stdDevPop(salary) AS 'stdSalary' , stdDevSamp(salary) AS 'sapSalary' FROM person GROUP BY title ORDER BY bornDate ASC;
```

### IN

```sql
SELECT * FROM person WHERE title IN ('BOSS', 'ENGINEER');
```



## 表达式

支持：+、-、*、/

```sql
SELECT *, salary * (1 + bonusRate/100.0) AS income FROM person
SELECT * FROM person WHERE salary * (1 + bonusRate/100.0) = 16500
```



## 函数

### dateToString

同 [$dateToString](https://docs.mongodb.com/manual/reference/operator/aggregation/dateToString/#exp._S_dateToString)

```sql
dateToString(date, format, timeZone, onNull)
```

示例

```sql
SELECT *,dateToString(date, '%Y') AS year FROM test;
SELECT * FROM test WHERE dateToString(date, "%Y") = '2020';
SELECT *,dateToString(date, '%Y', '+08', '1999') AS year FROM test;
```

### dateFromString

同[$dateFromString](https://docs.mongodb.com/manual/reference/operator/aggregation/dateFromString/)

```sql
dateFromString(dateString, format, timeZone, onError, onNull)
```

示例

```sql
SELECT * ,dateFromString('2020-12-13', '%Y-%m-%d', '+08') AS registerAt FROM person
```

